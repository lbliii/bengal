# Plan: Track Page UX Improvements

**Status**: Active  
**Created**: 2025-12-04  
**Related**: `rfc-learning-tracks.md`

---

## Problems Identified

### 1. Cover Page Redundancy
The track landing page content (from `content/tracks/*.md`) includes:
- What You'll Learn (4 points)
- Prerequisites (3 bullets)
- Time Investment (table)
- Who This Is For (4 bullets)
- Key Concepts (code examples)
- What's Next

This duplicates information already shown in:
- Left sidebar (track progress, lesson list)
- Track contents overview (generated by template)

### 2. TOC Collision
Right sidebar TOC combines headings from all included sections. Many sections share similar H2/H3 headings:
- "Prerequisites" appears in multiple sections
- "Examples" appears 5+ times
- "Key Terms", "Best Practices", "Quick Reference" repeated

Result: Confusing, overly long TOC with ambiguous entries.

### 3. Super Long Page
A 6-section track creates a very long scrollable page. Options:
- Pagination (one section at a time)
- Progressive disclosure (lazy load)
- Better navigation for current long format

---

## Proposed Solutions

### Solution 1: Minimal Track Landing Pages

**Before** (current track landing page):
```markdown
## What You'll Learn
1. Master directives...
2. Use layout components...

## Prerequisites
- Completed Zero to Deployed...
- Comfortable writing Markdown...

## Time Investment
| Step | Duration |
|------|----------|
| Content Authoring | 10 min |
...

## Who This Is For
...

## Key Concepts
### Directives
...code example...

## What's Next
...
```

**After** (minimal):
```markdown
Ready to go beyond basic Markdown? This track teaches you Bengal's
powerful content features: directives, snippets, variables, and reuse.

:::{tip}
**Time**: ~60 minutes | **Prerequisite**: [Zero to Deployed](/tracks/zero-to-deployed/)
:::
```

**Benefits**:
- Less scrolling before content starts
- Avoids duplication with sidebar/template-generated content
- Faster to scan

### Solution 2: Section-Aware TOC

**Current behavior**: All sections' headings visible, creating duplicates.

**Proposed behavior**:
1. Show only track section titles (H2 level) by default
2. Expand sub-headings only for the **active section** (where user is scrolling)
3. Collapse sub-headings for inactive sections

**Implementation**: Modify `tracks/single.html` or `partials/toc.html` to:
- Add `data-collapsed="true"` to non-active sections (already done!)
- Ensure JS expands only the active group based on scroll position
- May need to adjust `combine_track_toc()` to add section prefixes to heading IDs

**Alternative**: Only show track section titles in right TOC, rely on in-page navigation for sub-headings.

### Solution 3: Pagination Option

Add a track display mode: `pillar` (current) vs `paginated`.

**Paginated Mode**:
- Show one section at a time
- Prev/Next buttons at bottom
- URL updates with section ID (e.g., `/tracks/content-mastery/#section-2`)
- Left sidebar shows progress through sections

**Config**:
```yaml
# tracks.yaml
content-mastery:
  title: "Content Author Mastery"
  display: paginated  # or pillar (default)
  items: [...]
```

**Template Changes**:
- Check `track.display` in `tracks/single.html`
- If paginated: only render `track.items[current_section]`
- Add pagination controls

**Benefits**:
- Less overwhelming for long tracks
- Faster initial page load
- Clearer progress feeling

---

## Recommended Approach

### Phase 1: Quick Wins (Immediate)

1. **Simplify track landing pages** - Reduce to 2-3 sentences + tip admonition
2. **Verify TOC collapsing works** - The template already has `data-collapsed="true"` on inactive sections, just need to confirm JS is handling it

### Phase 2: TOC Improvements (Short-term)

3. **Section-scoped TOC** - Only show sub-headings for current section
4. **Optional**: Prefix TOC entries with section numbers (e.g., "3. Admonitions > Examples")

### Phase 3: Pagination Option (Future)

5. **Add `display: paginated` mode** - For tracks that work better section-by-section
6. **Persist progress** - localStorage to remember where user left off

---

## Implementation Details

### Simplified Track Landing Pages

Update each track page in `content/tracks/`:

```markdown
---
title: Content Author Mastery
description: Master advanced Markdown features, directives, and content reuse.
layout: tracks/single
track_id: content-mastery
---

Ready to go beyond basic Markdown? This track teaches you Bengal's powerful
content features: directives, snippets, variables, and reuse patterns.

:::{tip}
**Duration**: ~60 minutes | **Prerequisite**: [Zero to Deployed](/tracks/zero-to-deployed/)
:::
```

### TOC Section Awareness

The template already uses `data-collapsed="true"` on inactive sections. Need to verify:

1. Check `static/js/toc.js` for scroll-based expansion logic
2. Ensure only active section expands on scroll
3. May need to add CSS transitions for smooth expand/collapse

### Pagination Mode (Future)

```html
{# tracks/single.html #}
{% if track.display == 'paginated' %}
  {# Get current section from URL hash or default to 0 #}
  {% set current_idx = request.args.get('section', 0)|int %}
  {% set current_item = track.items[current_idx] %}

  {# Render only current section #}
  <section class="track-section track-section-paginated">
    {% set item_page = get_page(current_item) %}
    {{ item_page.parsed_ast | safe }}
  </section>

  {# Pagination controls #}
  <nav class="track-pagination">
    {% if current_idx > 0 %}
    <a href="?section={{ current_idx - 1 }}">← Previous</a>
    {% endif %}

    <span>{{ current_idx + 1 }} / {{ track.items|length }}</span>

    {% if current_idx < track.items|length - 1 %}
    <a href="?section={{ current_idx + 1 }}">Next →</a>
    {% endif %}
  </nav>
{% else %}
  {# Current pillar page behavior #}
{% endif %}
```

---

## Success Criteria

- [ ] Track landing page fits in one viewport (no scroll to reach first content)
- [ ] TOC shows ~10-15 items max (not 50+)
- [ ] Duplicate heading names distinguished by context
- [ ] User can quickly find where they are in the track
- [ ] (Future) Pagination mode available for long tracks

---

## Files to Modify

1. `content/tracks/*.md` - Simplify landing page content
2. `bengal/themes/default/templates/tracks/single.html` - TOC logic, pagination
3. `bengal/themes/default/static/js/toc.js` - Scroll-based section expansion
4. `site/data/tracks.yaml` - Add `display` option (future)

