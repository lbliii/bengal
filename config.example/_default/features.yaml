# Features Configuration
# ======================
# Controls what gets GENERATED during postprocessing.
# These are expensive operations that produce output files.
#
# Mental Model: "What do I want my site to DO?"
# - Simple boolean toggles for entire subsystems
# - Controls what gets generated during postprocessing
# - One file to enable/disable major capabilities
#
# What belongs here:
#   ✓ Postprocessing tasks (rss, sitemap, search)
#   ✓ Expensive optional computations (related_pages)
#   ✓ Processing capabilities (syntax_highlighting)
#   ✗ Always-on properties (reading_time, excerpt, toc)
#   ✗ Display preferences (those go in theme.yaml)
#
# Each feature expands into detailed configuration:
#   - rss: true → generate_rss: true, output_formats: [rss]
#   - sitemap: true → generate_sitemap: true
#   - search: true → search.enabled: true, search.preload: smart
#   - json: true → output_formats: [json], generate_index: true

features:
  # Output Formats (files generated during postprocessing)
  # -------------------------------------------------------
  
  # RSS Feed Generation (rss.xml)
  # Expands to: generate_rss: true, output_formats: [rss]
  rss: true
  
  # Sitemap Generation (sitemap.xml for SEO)
  # Expands to: generate_sitemap: true
  sitemap: true
  
  # Search (client-side search with index.json)
  # Expands to: search.enabled: true, search.preload: smart
  search: true
  
  # JSON Content API (per-page .json + index.json + .txt files)
  # Expands to: output_formats: [json, llm_txt], generate_index: true
  json: true
  
  # Processing Capabilities (affects rendering)
  # -------------------------------------------
  
  # Syntax Highlighting (code blocks with Pygments)
  # Expands to: syntax_highlighting.enabled: true
  syntax_highlighting: true
  
  # Expensive Optional Computations
  # --------------------------------
  
  # Related Pages (ML-based recommendations via tag similarity)
  # Expands to: related_pages.enabled: true
  # Note: Always computed when content.related_count > 0
  related_pages: false  # Disabled by default (compute intensive)

# Note: Always-Computed Properties
# =================================
# Some content properties are ALWAYS available and cannot be toggled:
#   - page.reading_time: Controlled by content.reading_speed
#   - page.excerpt: Controlled by content.excerpt_length
#   - page.toc: Controlled by content.toc_depth
#   - page.meta_description: Controlled by content.summary_length
#
# To control DISPLAY of these properties, use theme.yaml:
#   - theme.show_reading_time: true/false
#   - theme.show_excerpts_default: true/false
#
# To control HOW they're computed, use content.yaml:
#   - content.reading_speed: 200 (WPM)
#   - content.excerpt_length: 200 (characters)

# Detailed Configuration (for fine-tuning)
# =========================================

# RSS Configuration (if you need more control than feature toggle)
# rss:
#   enabled: true
#   filename: "feed.xml"
#   limit: 20
#   include_content: true

# Sitemap Configuration
# sitemap:
#   enabled: true
#   filename: "sitemap.xml"
#   change_freq: "weekly"
#   priority: 0.5

# Search Configuration
# search:
#   enabled: true
#   preload: "smart"  # smart, all, none
#   index_fields:
#     - title
#     - description
#     - content
#   stopwords: true

# Output Formats (what gets generated)
# ====================================

outputs:
  # Site-wide outputs (for index pages, taxonomies)
  site_wide:
    - html
    - rss      # From features.rss: true
    - json     # From features.json: true
  
  # Page-level outputs (for individual content)
  page:
    - html

# Health Checks (validate content during build)
# =============================================

health_check:
  enabled: true
  validators:
    - links      # Check for broken links
    - frontmatter  # Validate front matter schema
    - images      # Check for missing images
  
  # Fail build on errors
  fail_on_error: false
  
  # Report file
  report_file: ".bengal/health-report.json"

