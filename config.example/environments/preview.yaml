# Preview/Staging Environment
# ===========================
#
# Configuration for preview deployments (PRs, staging, etc).
# Auto-detected when:
#   - Netlify: CONTEXT=deploy-preview or branch-deploy
#   - Vercel: VERCEL_ENV=preview or development
#   - Explicit: BENGAL_ENV=preview
#
# Characteristics:
#   - Production-like settings (test before prod)
#   - But with some dev conveniences
#   - Performance optimized
#
# Precedence: _default → preview → profile → env vars → CLI

site:
  # Preview baseurl (set by platform)
  # Netlify: https://deploy-preview-123--yoursite.netlify.app
  # Vercel: https://yoursite-git-branch-user.vercel.app
  # Override if needed, or use platform's DEPLOY_PRIME_URL
  baseurl: "https://preview.example.com"
  
  # Disable indexing for preview sites
  robots: "noindex, nofollow"

build:
  # Enable parallelization for speed
  parallel: true
  max_workers: 4  # Conservative (CI often has fewer cores)
  
  # Incremental builds if cache available
  incremental: true
  
  # Moderate strictness (catch issues before prod)
  strict_mode: false

features:
  # Enable all features (test them before production)
  rss: true
  sitemap: true
  search: true
  json: true
  related_pages: false  # Still heavy, skip in preview

health_check:
  # Full checks, but don't fail build
  enabled: true
  fail_on_error: false
  validators:
    - links
    - frontmatter
    - images

markdown:
  highlight:
    style: "github-dark"  # Match production

# Preview-specific settings
dev:
  # Show warnings but not full debug
  verbose: false
  show_errors: true

