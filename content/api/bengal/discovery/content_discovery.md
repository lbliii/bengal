
---
title: "content_discovery"
type: "python-module"
source_file: "bengal/bengal/discovery/content_discovery.py"
line_number: 1
description: "Content discovery - finds and organizes pages and sections. Robustness: - Symlink loop detection via inode tracking to prevent infinite recursion"
---

# content_discovery
**Type:** Module
**Source:** [View source](bengal/bengal/discovery/content_discovery.py#L1)



**Navigation:**
[bengal](/api/bengal/) ›[discovery](/api/bengal/discovery/) ›content_discovery

Content discovery - finds and organizes pages and sections.

Robustness:
    - Symlink loop detection via inode tracking to prevent infinite recursion

## Classes




### `ContentDiscovery`


Discovers and organizes content files into pages and sections.

Notes:
- YAML errors in front matter are downgraded to debug; we fall back to using the content
  and synthesize minimal metadata to keep the build progressing.
- UTF-8 BOM is stripped at read time by `bengal.utils.file_io.read_text_file` to avoid
  confusing the YAML/front matter parser.
- I18n dir-prefix strategy is supported (e.g., `content/en/...`); hidden files/dirs are
  skipped except `_index.md`.
- Parsing uses a thread pool for concurrency; unchanged pages can be represented as
  `PageProxy` in lazy modes.
- Symlink loops are detected via inode tracking to prevent infinite recursion.









## Methods



#### `__init__`
```python
def __init__(self, content_dir: Path, site: Any | None = None) -> None
```


Initialize content discovery.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `content_dir` | `Path` | - | Root content directory |
| `site` | `Any \| None` | - | *No description provided.* |







**Returns**


`None`



#### `discover`
```python
def discover(self, use_cache: bool = False, cache: Any | None = None) -> tuple[list[Section], list[Page]]
```


Discover all content in the content directory.

Supports optional lazy loading with PageProxy for incremental builds.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `use_cache` | `bool` | `False` | Whether to use PageDiscoveryCache for lazy loading |
| `cache` | `Any \| None` | - | PageDiscoveryCache instance (if use_cache=True) |







**Returns**


`tuple[list[Section], list[Page]]` - Tuple of (sections, pages)
:::{note}When use_cache=True and cache is provided: - Unchanged pages are returned as PageProxy (metadata only, lazy load on demand) - Changed pages are fully parsed and returned as normal Page objects - This saves disk I/O and parsing time for unchanged pages:::
:::{note}When use_cache=False (default): - All pages are fully discovered and parsed (current behavior) - Backward compatible - no changes to calling code needed:::



---
*Generated by Bengal autodoc from `bengal/bengal/discovery/content_discovery.py`*
