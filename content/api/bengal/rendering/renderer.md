
---
title: "renderer"
type: "python-module"
source_file: "bengal/bengal/rendering/renderer.py"
line_number: 1
description: "Renderer for converting pages to final HTML output. Handles individual page rendering using templates, markdown processing, and content transformation. Integrates with template engine for Jinja2 rende..."
---

# renderer
**Type:** Module
**Source:** [View source](bengal/bengal/rendering/renderer.py#L1)



**Navigation:**
[bengal](/api/bengal/) ›[rendering](/api/bengal/rendering/) ›renderer

Renderer for converting pages to final HTML output.

Handles individual page rendering using templates, markdown processing, and
content transformation. Integrates with template engine for Jinja2 rendering
and provides error handling with graceful degradation.

Key Concepts:
    - Template rendering: Jinja2 template rendering with page context
    - Markdown processing: Markdown to HTML conversion
    - Content transformation: Link rewriting, image processing, etc.
    - Error handling: Graceful error handling with error pages

Related Modules:
    - bengal.rendering.template_engine: Template engine for Jinja2 rendering
    - bengal.rendering.parsers.mistune: Markdown parser
    - bengal.rendering.link_transformer: Link transformation logic

See Also:
    - bengal/rendering/renderer.py:Renderer class for rendering logic
    - plan/active/rfc-template-performance-optimization.md: Performance RFC

## Classes




### `Renderer`


Renders individual pages using templates and content processing.

Handles template rendering, content processing (H1 stripping), and error
collection. Integrates with template engine for Jinja2 rendering and
provides graceful error handling.

Creation:
    Direct instantiation: Renderer(template_engine, build_stats=None)
        - Created by RenderingPipeline for page rendering
        - Requires TemplateEngine instance



**Attributes:**

| Name | Type | Description |
|:-----|:-----|:------------|
| `template_engine` | - | TemplateEngine instance for Jinja2 rendering |
| `site` | - | Site instance (accessed via template_engine.site) |
| `build_stats` | - | Optional BuildStats for error collection |
| `Relationships` | - | - Uses: TemplateEngine for template rendering - Uses: BuildStats for error collection - Used by: RenderingPipeline for page rendering Thread Safety: Thread-safe. Each thread should have its own Renderer instance. |







## Methods



#### `__init__`
```python
def __init__(self, template_engine: Any, build_stats: Any = None) -> None
```


Initialize the renderer.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `template_engine` | `Any` | - | Template engine instance |
| `build_stats` | `Any` | - | Optional BuildStats object for error collection |







**Returns**


`None`



#### `render_content`
```python
def render_content(self, content: str) -> str
```


Render raw content (already parsed HTML).

Automatically strips the first H1 tag to avoid duplication with
the template-rendered title.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `content` | `str` | - | Parsed HTML content |







**Returns**


`str` - Content with first H1 removed




#### `render_page`
```python
def render_page(self, page: Page, content: str | None = None) -> str
```


Render a complete page with template.

Architecture:
1. Builds initial context (metadata, TOC, content)
2. Adds specialized context based on page type:
   - Generated pages (tags/archives): Adds filtered `posts` list
   - Section pages: Adds section-specific `posts`
   - Root index: Adds top-level pages
3. Renders using Jinja2 template

Conflict Prevention:
Logic strictly separates "Root Index" (home page) from "Generated Index" (tag pages).
Tag pages often have source paths like `tags/foo/index.md` (is_index_page=True)
but must NOT use the root home page logic which overwrites their `posts` list.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `page` | `Page` | - | Page to render |
| `content` | `str \| None` | - | Optional pre-rendered content (uses page.parsed_ast if not provided) |







**Returns**


`str` - Fully rendered HTML page



---
*Generated by Bengal autodoc from `bengal/bengal/rendering/renderer.py`*
