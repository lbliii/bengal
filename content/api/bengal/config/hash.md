
---
title: "hash"
type: "python-module"
source_file: "bengal/bengal/config/hash.py"
line_number: 1
description: "Configuration hash utility for cache invalidation. This module provides deterministic hashing of configuration state, enabling automatic cache invalidation when the effective configuration changes (in..."
---

# hash
**Type:** Module
**Source:** [View source](bengal/bengal/config/hash.py#L1)



**Navigation:**
[bengal](/api/bengal/) ›[config](/api/bengal/config/) ›hash

Configuration hash utility for cache invalidation.

This module provides deterministic hashing of configuration state,
enabling automatic cache invalidation when the effective configuration
changes (including env vars, profiles, and split config files).

Architecture:
    The hash captures the *resolved* configuration state, not just file contents.
    This ensures cache correctness when:
    - Environment variables change (BENGAL_*)
    - Build profiles change (--profile writer)
    - Split config files change (config/environments/local.yaml)

Related:
    - bengal/cache/build_cache.py: Uses config_hash for validation
    - bengal/config/loader.py: Produces the config dict to hash
    - plan/active/rfc-zensical-inspired-patterns.md: Design rationale

## Functions



### `compute_config_hash`


```python
def compute_config_hash(config: dict[str, Any]) -> str
```



Compute deterministic SHA-256 hash of configuration state.

The hash is computed from the *resolved* configuration dictionary,
capturing all effective settings including:
- Base configuration from config files
- Environment variable overrides
- Profile-specific settings
- Merged split config files

Algorithm:
    1. Recursively sort all dictionary keys (deterministic ordering)
    2. Serialize to JSON with custom handler for non-JSON types
    3. Compute SHA-256 hash
    4. Return first 16 characters (sufficient for uniqueness)


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `config` | `dict[str, Any]` | - | Resolved configuration dictionary |







**Returns**


`str` - 16-character hex string (truncated SHA-256)
:::{rubric} Examples
:class: rubric-examples
:::


```python
>>> config1 = {"title": "My Site", "baseurl": "/"}
    >>> config2 = {"baseurl": "/", "title": "My Site"}  # Same values, different order
    >>> compute_config_hash(config1) == compute_config_hash(config2)
    True

    >>> config3 = {"title": "My Site", "baseurl": "/blog"}
    >>> compute_config_hash(config1) == compute_config_hash(config3)
    False
```



---
*Generated by Bengal autodoc from `bengal/bengal/config/hash.py`*
