
---
title: "performance_collector"
type: "python-module"
source_file: "bengal/bengal/utils/performance_collector.py"
line_number: 1
description: "Performance metrics collection for Bengal SSG. Collects and persists build performance metrics including timing and memory usage. This is Phase 1 of the continuous performance tracking system. Example..."
---

# performance_collector
**Type:** Module
**Source:** [View source](bengal/bengal/utils/performance_collector.py#L1)



**Navigation:**
[bengal](/api/bengal/) ›[utils](/api/bengal/utils/) ›performance_collector

Performance metrics collection for Bengal SSG.

Collects and persists build performance metrics including timing and memory usage.
This is Phase 1 of the continuous performance tracking system.

Example:
    from bengal.utils.performance_collector import PerformanceCollector

    collector = PerformanceCollector()
    collector.start_build()

    # ... run build ...

    stats = collector.end_build(build_stats)
    collector.save(stats)

## Classes




### `PerformanceCollector`


Collects and persists build performance metrics.

Phase 1 implementation: Basic timing and memory collection.
Future phases will add per-phase tracking, git info, and top allocators.

Usage:
    collector = PerformanceCollector()
    collector.start_build()

    # ... execute build ...

    stats = collector.end_build(build_stats)
    collector.save(stats)









## Methods



#### `__init__`
```python
def __init__(self, metrics_dir: Path | None = None)
```


Initialize performance collector.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `metrics_dir` | `Path \| None` | - | Directory to store metrics (default: .bengal/metrics) |








#### `start_build`
```python
def start_build(self)
```


Start collecting metrics for a build.




#### `end_build`
```python
def end_build(self, stats)
```


End collection and update stats with memory metrics.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `stats` | - | - | BuildStats object to update with memory information |








#### `save`
```python
def save(self, stats)
```


Save metrics to disk for historical tracking.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `stats` | - | - | BuildStats object to persist |








#### `get_summary`
```python
def get_summary(self, stats) -> str
```


Generate a one-line summary of build metrics.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `stats` | - | - | BuildStats object |







**Returns**


`str` - Formatted summary string

## Functions



### `format_memory`


```python
def format_memory(mb: float) -> str
```



Format memory size for display.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `mb` | `float` | - | Memory in megabytes |







**Returns**


`str` - Formatted string (e.g., "125.3 MB" or "1.2 GB")



---
*Generated by Bengal autodoc from `bengal/bengal/utils/performance_collector.py`*
