
---
title: "memory_profiler"
type: "python-module"
source_file: "../bengal/benchmarks/memory_profiler.py"
line_number: 1
description: "Memory profiling utilities for benchmark analysis. Tracks peak memory usage during builds to identify memory-related bottlenecks and help understand scale degradation (141 pps @ 1K pages → 29 pps @ 10..."
---

# memory_profiler
**Type:** Module
**Source:** [View source](../bengal/benchmarks/memory_profiler.py#L1)



**Navigation:**
[benchmarks](/api/benchmarks/) ›memory_profiler

Memory profiling utilities for benchmark analysis.

Tracks peak memory usage during builds to identify memory-related bottlenecks
and help understand scale degradation (141 pps @ 1K pages → 29 pps @ 10K pages).

## Classes




### `MemoryStats`


Memory statistics from a single build run.


```{info}
This is a dataclass.
```



**Attributes:**

| Name | Type | Description |
|:-----|:-----|:------------|
| `peak_mb` | - | *No description provided.* |
| `current_mb` | - | *No description provided.* |
| `page_count` | - | *No description provided.* |
| `memory_per_page` | - | *No description provided.* |







## Methods



#### `to_dict`
```python
def to_dict(self) -> dict
```


Convert to dictionary for JSON serialization.



**Returns**


`dict`




### `MemoryProfiler`


Profile memory usage during Bengal builds.









## Methods



#### `__init__`
```python
def __init__(self, scenario_path: Path)
```


Initialize profiler for a scenario.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `scenario_path` | `Path` | - | Path to the scenario directory containing bengal.toml |








#### `profile_build`
```python
def profile_build(self, page_count: int | None = None) -> MemoryStats
```


Profile memory usage during a build.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `page_count` | `int \| None` | - | Number of pages in scenario (for per-page calculation). If not provided, will try to count .md files. |







**Returns**


`MemoryStats` - MemoryStats with peak memory and other statistics.



#### `profile_and_save`
```python
def profile_and_save(self, output_file: Path, page_count: int | None = None) -> MemoryStats
```


Profile build and save results to JSON file.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `output_file` | `Path` | - | Path where JSON results will be saved. |
| `page_count` | `int \| None` | - | Number of pages in scenario. |







**Returns**


`MemoryStats` - MemoryStats with the collected statistics.

## Functions



### `compare_memory_stats`


```python
def compare_memory_stats(stats_list: list[MemoryStats]) -> dict
```



Compare memory statistics across multiple runs.

Useful for identifying scale degradation patterns.


**Parameters:**

| Name | Type | Default | Description |
|:-----|:-----|:--------|:------------|
| `stats_list` | `list[MemoryStats]` | - | List of MemoryStats from different scenario sizes. |







**Returns**


`dict` - Dictionary with comparison analysis.



---
*Generated by Bengal autodoc from `../bengal/benchmarks/memory_profiler.py`*
