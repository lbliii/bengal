{#-
Base Template for All Autodoc Documentation

This template provides the common structure and layout that all documentation
types (Python, CLI, OpenAPI) inherit from. It ensures consistency across
all generated documentation.
-#}

{#- Import shared macros -#}
{% from 'macros/safe_macros.md.jinja2' import safe_section, debug_info %}
{% from 'macros/navigation.md.jinja2' import breadcrumbs, source_link %}

---
title: "{% block title %}{{ element.name | default('Documentation') }}{% endblock %}"
type: "{% block doc_type %}doc{% endblock %}"
{% block source_metadata %}
{% if element and element.source_file %}
source_file: "{{ element.source_file | project_relative }}"
{% endif %}
{% if element and element.line_number %}
line_number: {{ element.line_number }}
{% endif %}
{% endblock %}
description: "{% block description %}{{ element.description | safe_description | default('Documentation') }}{% endblock %}"
{% block extra_frontmatter %}{% endblock %}
---

{% block header %}
# {% block page_title %}{{ element.name | default('Documentation') }}{% endblock %}

{% block element_info %}
{% if element %}
{% if element.element_type %}
**Type:** {{ element.element_type | title }}
{% endif %}
{% if element.source_file %}
**Source:** {{ source_link(element.source_file, element.line_number) }}
{% endif %}
{% endif %}
{% endblock %}
{% endblock %}

{% block badges %}
{#- Override in child templates for type-specific badges -#}
{% endblock %}

{% block navigation %}
{#- Breadcrumb navigation for nested elements -#}
{% if element %}
{{ breadcrumbs(element) }}
{% endif %}
{% endblock %}

{% block content %}
{#- Child templates implement this block -#}
{% if element and element.description %}
{{ element.description }}
{% else %}
*No description provided.*
{% endif %}
{% endblock %}

{% block see_also %}
{#- Cross-references and related links -#}
{% endblock %}

{% block footer %}
{% block footer_content %}
---
*Generated by Bengal autodoc{% if element and element.source_file %} from `{{ element.source_file | project_relative }}`{% endif %}*
{% endblock %}
{% endblock %}

{% block debug %}
{#- Debug information (only shows in debug mode) -#}
{% if config.get('autodoc', {}).get('template_safety', {}).get('debug_mode', false) %}
{{ debug_info('Template', 'base.md.jinja2') }}
{% if element %}
{{ debug_info('Element Type', element.element_type) }}
{{ debug_info('Element Name', element.name) }}
{% endif %}
{% endif %}
{% endblock %}
