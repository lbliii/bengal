{#-
================================================================================
Badge Macros

Reusable macros for rendering badges and status indicators.
Used across all autodoc templates for consistent badge styling.

Usage:
  {% from 'html/macros/badges.html' import element_badges, type_badge %}
  {{ type_badge('class') }}
  {{ element_badges(element) }}
================================================================================
-#}

{#-
Render a single type badge

Args:
    badge_type: Type name (module, class, function, method, etc.)
    compact: Use compact styling (default: false)
-#}
{% macro type_badge(badge_type, compact=false) %}
<span class="api-badge{% if compact %} api-badge--compact{% endif %} api-badge--{{ badge_type | lower }}">
  {{ badge_type | title }}
</span>
{% endmacro %}


{#-
Render a status badge (async, deprecated, classmethod, etc.)

Args:
    status: Status name
    compact: Use compact/tiny styling
-#}
{% macro status_badge(status, compact=false) %}
<span class="api-badge{% if compact %}--tiny{% endif %} api-badge--{{ status | lower }}">
  {{ status }}
</span>
{% endmacro %}


{#-
Render all applicable badges for a DocElement

Args:
    element: DocElement with metadata
    compact: Use compact styling
-#}
{% macro element_badges(element, compact=false) %}
{% if element.metadata %}
  {# Dataclass badge #}
  {% if element.metadata.is_dataclass %}
  {{ status_badge('dataclass', compact) }}
  {% endif %}

  {# Abstract class badge #}
  {% if element.metadata.is_abstract %}
  {{ status_badge('abstract', compact) }}
  {% endif %}

  {# Async badge #}
  {% if element.metadata.is_async %}
  {{ status_badge('async', compact) }}
  {% endif %}

  {# Method type badges #}
  {% if element.metadata.is_classmethod %}
  {{ status_badge('classmethod', compact) }}
  {% endif %}

  {% if element.metadata.is_staticmethod %}
  {{ status_badge('staticmethod', compact) }}
  {% endif %}

  {% if element.metadata.is_property %}
  {{ status_badge('property', compact) }}
  {% endif %}

  {# Deprecated badge #}
  {% if element.metadata.deprecated %}
  {{ status_badge('deprecated', compact) }}
  {% endif %}
{% endif %}
{% endmacro %}


{#-
Render a visibility badge (public, private, protected)

Args:
    name: Element name to check for underscore prefix
-#}
{% macro visibility_badge(name) %}
{% if name.startswith('__') and not name.endswith('__') %}
<span class="api-badge--tiny api-badge--private">private</span>
{% elif name.startswith('_') %}
<span class="api-badge--tiny api-badge--protected">protected</span>
{% endif %}
{% endmacro %}
