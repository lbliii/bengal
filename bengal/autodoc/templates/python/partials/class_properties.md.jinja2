{#-
Class Properties Component

Renders class properties with safe error boundaries.
Handles property signatures and descriptions safely.
-#}

{% from 'macros/safe_macros.md.jinja2' import safe_render, safe_for %}

{% set properties = item.children | selectattr('metadata.is_property', 'equalto', true) | list %}

{% if properties %}
<div class="api-properties">
  <h4 class="api-subsection-title">Properties</h4>

  {% call(prop_item) safe_for(properties, "*No properties found.*") %}
    {% call safe_render("property", prop_item) %}
      <details class="api-card api-card--property">
        <summary class="api-card__header">
          <code class="api-card__name">{{ prop_item.name }}</code>
          <div class="api-card__badges">
            <span class="api-badge--compact api-badge--property">property</span>
          </div>
          <span class="api-card__toggle">â–¸</span>
        </summary>

        <div class="api-card__body">
            {% if prop_item.metadata.signature %}
               <div class="api-signature">{{ prop_item.metadata.signature }}</div>
            {% endif %}

            <p class="api-card__description">
                {{ prop_item.description | default('*No description provided.*') | trim }}
            </p>

            {% if prop_item.metadata.returns %}
            <div class="api-returns">
                <span class="api-returns__label">Type</span>
                <span class="api-returns__type">{{ prop_item.metadata.returns }}</span>
            </div>
            {% endif %}
        </div>
      </details>
    {% endcall %}
  {% endcall %}
</div>
{% endif %}
