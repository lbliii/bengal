{#-
Class Properties Component

Renders class properties with safe error boundaries.
Handles property signatures and descriptions safely.
-#}

{% from 'macros/safe_macros.md.jinja2' import safe_render, safe_for %}

{% set properties = item.children | selectattr('metadata.is_property', 'equalto', true) | list %}

{% if properties %}
<div class="api-properties">
  <h4 class="api-subsection-title">Properties</h4>

  {% call(prop_item) safe_for(properties, "*No properties found.*") %}
    {% call safe_render("property", prop_item) %}
      <details class="api-method api-property">
        <summary class="api-method__header">
          <code class="api-method__name">{{ prop_item.name }}</code>
          <span class="api-badge--tiny api-badge--property">property</span>
        </summary>

        <div class="api-method__content">
            {% if prop_item.metadata.signature %}
            <div class="code-block-wrapper">
               <pre class="api-method__signature"><code class="language-python">{{ prop_item.metadata.signature }}</code></pre>
            </div>
            {% endif %}

            <p class="api-method__description">
                {{ prop_item.description | default('*No description provided.*') | trim }}
            </p>

            {% if prop_item.metadata.returns %}
            <div class="api-returns">
                <h5 class="api-label">Type</h5>
                <p><code>{{ prop_item.metadata.returns }}</code></p>
            </div>
            {% endif %}
        </div>
      </details>
    {% endcall %}
  {% endcall %}
</div>
{% endif %}
