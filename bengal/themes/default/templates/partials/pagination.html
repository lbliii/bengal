{#
  Pagination Component

  Displays page number controls for paginated content with prev/next buttons.

  Variables:
    - current_page: Current page number (1-indexed, required)
    - total_pages: Total number of pages (required)
    - base_url: Base URL for pagination (e.g., '/blog/', required)

  Template Functions Used:
    - get_pagination_items(current_page, total_pages, base_url): Returns pagination structure
      - p.prev: Previous page info (url)
      - p.next: Next page info (url)
      - p.pages: List of page items (num, url, is_current, is_ellipsis)

  Features:
    - Smart ellipsis for large page counts
    - Accessible with aria-current and aria-label
    - SVG icons for prev/next
    - Disabled state for unavailable links

  Usage:
    {% include 'partials/pagination.html' with {'current_page': 2, 'total_pages': 10, 'base_url': '/blog/'} %}
#}

{% if total_pages > 1 %}
{% set p = get_pagination_items(current_page, total_pages, base_url) %}

<nav class="pagination" role="navigation" aria-label="Pagination">
    <ul>
        {# Previous Button #}
        <li>
            {% if p.prev %}
                <a href="{{ p.prev.url }}" aria-label="Previous page">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Previous
                </a>
            {% else %}
                <span class="disabled">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Previous
                </span>
            {% endif %}
        </li>

        {# Page Numbers #}
        {% for item in p.pages %}
            <li>
                {% if item.is_ellipsis %}
                    <span class="ellipsis">...</span>
                {% elif item.is_current %}
                    <span class="active" aria-current="page">{{ item.num }}</span>
                {% else %}
                    <a href="{{ item.url }}">{{ item.num }}</a>
                {% endif %}
            </li>
        {% endfor %}

        {# Next Button #}
        <li>
            {% if p.next %}
                <a href="{{ p.next.url }}" aria-label="Next page">
                    Next
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            {% else %}
                <span class="disabled">
                    Next
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </span>
            {% endif %}
        </li>
    </ul>
</nav>
{% endif %}
