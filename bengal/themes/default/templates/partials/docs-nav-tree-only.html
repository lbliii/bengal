{#
Navigation Tree (Scaffold Mode - Tree Only)

Renders just the nav tree structure without the outer <nav> wrapper.
Used for pre-rendering and caching scaffold HTML.

This template is designed to be rendered independently and cached.
The wrapper (docs-nav-scaffold.html) adds the outer nav element with
data attributes.

Variables:
- scaffold_ctx: ScaffoldContext from get_nav_scaffold_context()
- root_section: Optional root section for scoped navigation
- show_nav_icons: Whether to show section icons (default: true)
#}

{% set show_nav_icons = show_nav_icons if show_nav_icons is defined else true %}

{% if root_section %}
{# Scoped navigation: render from root section #}
{% set root_item = scaffold_ctx['root'] %}

<div class="docs-nav-group docs-nav-group--root"
     data-depth="0"
     data-nav-path="{{ root_item._path }}">
  <div class="docs-nav-group-header">
    {% if show_nav_icons %}
    <span class="docs-nav-icon" {% if not root_item.icon %}data-default="true"{% endif %}>
      {{ icon(root_item.icon or 'folder', size=16) }}
    </span>
    {% endif %}

    {% if root_item.href %}
    <a href="{{ root_item.href }}"
       class="docs-nav-group-title"
       data-nav-path="{{ root_item._path }}">
      {{ root_item.title }}
    </a>
    {% else %}
    <span class="docs-nav-group-title">{{ root_item.title }}</span>
    {% endif %}
  </div>

  <div class="docs-nav-group-items">
    {% for item in root_item.children %}
    {% set depth = 1 %}
    {% include 'partials/docs-nav-scaffold-node.html' %}
    {% endfor %}
  </div>
</div>
{% else %}
{# Unscoped navigation: render all top-level items #}
{% set nav_items = scaffold_ctx['root'].children %}

{% for item in nav_items %}
{% set depth = 0 %}
{% include 'partials/docs-nav-scaffold-node.html' %}
{% endfor %}
{% endif %}
