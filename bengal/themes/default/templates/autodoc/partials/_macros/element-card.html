{#
Element Card Macro

Renders a single autodoc element as a card (command, class, function, endpoint, etc.).

Usage:
{% from 'autodoc/partials/_macros/element-card.html' import element_card %}
{{ element_card(child) }}
{{ element_card(child, card_type='command') }}

Args:
child: DocElement to render (required)
card_type: Override element type for styling (optional)

Note: DocElement.href is pre-computed during page building with baseurl included.
Templates should use {{ child.href }} directly for links.
#}

{% def element_card(child, card_type=none) %}
{% set child_type = card_type or child.element_type %}
{# Use pre-computed href (includes baseurl), fall back to anchor if not set #}
{% set child_url = child.href or '#' %}
<a href="{{ child_url }}" class="autodoc-card" data-card="{{ child_type }}">
    {% if child_type == 'endpoint' and child.metadata.method %}
    <span class="autodoc-method" data-method="{{ child.metadata.method | lower }}">{{ child.metadata.method | upper
        }}</span>
    {% end %}
    <code class="autodoc-card-name">{{ child.name }}</code>
    {% if child.description %}
    <span class="autodoc-card-desc">{{ child.description | truncate(100) }}</span>
    {% end %}
</a>
{% enddef %}
