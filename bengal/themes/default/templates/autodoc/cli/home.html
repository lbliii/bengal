{% extends "base.html" %}

{#
CLI Reference Home Template

Optimized home page template for CLI reference sites. Features:
- No action bar (cleaner for home page)
- Hero section with title and description
- Main content area
- Quick links to key CLI reference sections
- No blog posts (CLI reference sites don't need recent posts)

Usage: Set `type: autodoc-cli` on home page to auto-select
Or set `template: autodoc/cli/home.html` in frontmatter
#}

{% block content %}
<div class="docs-home">
    {# Hero Section #}
    <header class="docs-home-hero">
        <div class="docs-home-hero-content">
            <h1 class="docs-home-title">{{ page.title | default(site.title) }}</h1>
            {% if params.description %}
            <p class="docs-home-subtitle">{{ params.description }}</p>
            {% end %}
        </div>
    </header>

    {# Main Content #}
    {% if content and content.strip() %}
    <div class="docs-home-content prose">
        {{ content | safe }}
    </div>
    {% end %}

    {# Quick Links to Key Sections #}
    {% set show_quick_links = params.show_quick_links ?? true %}
    {% if show_quick_links %}
    {# Find CLI reference sections #}
    {% set cli_sections = [] %}
    {% for section in site.sections %}
    {% if section.metadata.type == 'autodoc-cli' or section.metadata.content_type == 'autodoc-cli' %}
    {% do cli_sections.append(section) %}
    {% end %}
    {% end %}

    {# If no autodoc-cli sections found, try common section names #}
    {% if not cli_sections %}
    {% set common_names = ['cli', 'autodoc-cli', 'commands', 'command-line'] %}
    {% for name in common_names %}
    {% set candidates = site.sections | selectattr('name', 'equalto', name) | list %}
    {% if candidates %}
    {% do cli_sections.append(candidates[0]) %}
    {% end %}
    {% end %}
    {% end %}

    {% if cli_sections %}
    {# Build sortable list with safe weight values #}
    {% set sortable_sections = [] %}
    {% for section in cli_sections %}
    {% set _weight = section.metadata.weight %}
    {% do sortable_sections.append({'section': section, 'weight': _weight if _weight != none else 999999}) %}
    {% end %}
    <section class="docs-home-sections">
        <h2 class="docs-home-sections-title">{{ page.title ?? 'CLI Reference' }} Sections</h2>
        <div class="docs-home-sections-grid">
            {% for item in sortable_sections | sort(attribute='weight') | limit(6) %}
            {% set section = item.section %}
            <a href="{{ section.href }}" class="docs-home-section-card gradient-border fluid-combined">
                <h3 class="docs-home-section-title">{{ section.title }}</h3>
                {% if section.metadata.description %}
                <p class="docs-home-section-description">{{ section.metadata.description }}</p>
                {% end %}
                {% if section.pages %}
                <span class="docs-home-section-count">{{ section.pages | length }} command{{ 's' if section.pages | length
                    != 1 else '' }}</span>
                {% end %}
            </a>
            {% end %}
        </div>
    </section>
    {% end %}
    {% end %}

    {# Custom Quick Links from metadata #}
    {% if params.quick_links %}
    <section class="docs-home-quick-links">
        <h2 class="docs-home-quick-links-title">Quick Links</h2>
        <div class="docs-home-quick-links-grid">
            {% for link in params.quick_links %}
            <a href="{{ link.href or link.url }}" class="docs-home-quick-link-card gradient-border">
                {% if link.icon %}
                <div class="docs-home-quick-link-icon">{{ link.icon }}</div>
                {% end %}
                <h3>{{ link.title }}</h3>
                {% if link.description %}
                <p>{{ link.description }}</p>
                {% end %}
            </a>
            {% end %}
        </div>
    </section>
    {% end %}
</div>
{% end %}
