{% extends "base.html" %}

{#
Single Release Template

Used for individual release/changelog pages.

Usage: Create markdown files with `type: changelog`

Frontmatter example:
---
title: Version 1.2.0
type: changelog
date: 2025-10-12
name: "Feature Release"
status: stable
summary: Major new features and improvements
added:
- New feature A
- New feature B
changed:
- Updated feature C
fixed:
- Fixed bug D
---
#}

{% from 'partials/navigation-components.html' import breadcrumbs %}

{% block content %}
<article class="changelog-single">
    {# Action Bar: Breadcrumbs + Share #}
    {% include 'partials/action-bar.html' %}

    <header class="release-header">
        <h1>{{ page.title }}</h1>

        {% if params.name %}
        <p class="release-name">{{ params.name }}</p>
        {% endif %}

        <div class="release-meta">
            {% if page.date %}
            <time datetime="{{ page.date | date_iso }}" class="release-date">
                Released {{ page.date | dateformat('%B %d, %Y') }}
            </time>
            {% endif %}

            {% if params.status %}
            <span class="release-status status-{{ params.status | lower }}">
                {{ params.status }}
            </span>
            {% endif %}
        </div>

        {% if params.description %}
        <p class="release-summary">{{ params.description }}</p>
        {% elif params.summary %}
        <p class="release-summary">{{ params.summary }}</p>
        {% endif %}
    </header>

    <div class="release-content">
        {# Added Features #}
        {% if params.added and params.added is iterable and params.added is
        not string %}
        <section class="changelog-category">
            <h2 class="category-title">âœ¨ Added</h2>
            <ul class="changelog-list">
                {% for item in params.added %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Changed/Improved #}
        {% if params.changed and params.changed is iterable and params.changed
        is not string %}
        <section class="changelog-category">
            <h2 class="category-title">ğŸ”„ Changed</h2>
            <ul class="changelog-list">
                {% for item in params.changed %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Fixed Bugs #}
        {% if params.fixed and params.fixed is iterable and params.fixed is
        not string %}
        <section class="changelog-category">
            <h2 class="category-title">ğŸ› Fixed</h2>
            <ul class="changelog-list">
                {% for item in params.fixed %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Deprecated #}
        {% if params.deprecated and params.deprecated is iterable and
        params.deprecated is not string %}
        <section class="changelog-category">
            <h2 class="category-title">âš ï¸ Deprecated</h2>
            <ul class="changelog-list">
                {% for item in params.deprecated %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Removed #}
        {% if params.removed and params.removed is iterable and params.removed
        is not string %}
        <section class="changelog-category">
            <h2 class="category-title">ğŸ—‘ï¸ Removed</h2>
            <ul class="changelog-list">
                {% for item in params.removed %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Security #}
        {% if params.security and params.security is iterable and
        params.security is not string %}
        <section class="changelog-category">
            <h2 class="category-title">ğŸ”’ Security</h2>
            <ul class="changelog-list">
                {% for item in params.security %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Breaking Changes #}
        {% if params.breaking and params.breaking is iterable and
        params.breaking is not string %}
        <section class="changelog-category changelog-breaking">
            <h2 class="category-title">âš¡ Breaking Changes</h2>
            <ul class="changelog-list">
                {% for item in params.breaking %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        {# Main content (detailed release notes) #}
        {% if content and content.strip() %}
        <section class="release-details prose">
            {{ content | safe }}
        </section>
        {% endif %}

        {# Links #}
        {% if params.github_release or params.download_url %}
        <footer class="release-footer">
            <div class="release-links">
                {% if params.github_release %}
                <a href="{{ params.github_release }}" class="release-link" target="_blank">
                    View on GitHub â†’
                </a>
                {% endif %}
                {% if params.download_url %}
                <a href="{{ params.download_url }}" class="release-link release-download" target="_blank">
                    Download Release â†“
                </a>
                {% endif %}
            </div>
        </footer>
        {% endif %}
    </div>
</article>
{% endblock %}
