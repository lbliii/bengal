/**
 * API Explorer - Terminal-Inspired Documentation Windows
 *
 * Sleek, terminal-like API documentation with:
 * - Window chrome title bars
 * - Neumorphic depth & diffused light
 * - Gradient accents & luminescent edges
 * - Collapsed by default with smooth reveals
 * - Clear visual hierarchy for nested content
 */

/* ============================================
   DESIGN TOKENS FOR API EXPLORER
   ============================================ */

.api-explorer {
  /* Window chrome */
  --api-window-bg: var(--color-bg-elevated);
  --api-window-header-bg: linear-gradient(180deg, 
    var(--color-surface) 0%, 
    color-mix(in srgb, var(--color-surface) 95%, var(--color-bg-secondary)) 100%);
  --api-window-border: var(--color-border-light);
  --api-window-radius: 12px;
  
  /* Terminal-inspired styling */
  --api-terminal-dot-red: #ff5f57;
  --api-terminal-dot-yellow: #febc2e;
  --api-terminal-dot-green: #28c840;
  
  /* Depth & glow */
  --api-shadow-diffused: 
    0 4px 24px -4px rgba(0, 0, 0, 0.08),
    0 8px 32px -8px rgba(0, 0, 0, 0.04);
  --api-shadow-elevated:
    0 8px 32px -8px rgba(0, 0, 0, 0.12),
    0 16px 48px -16px rgba(0, 0, 0, 0.08);
  --api-glow-primary: 0 0 20px -4px color-mix(in srgb, var(--color-primary) 25%, transparent);
  --api-glow-accent: 0 0 24px -4px color-mix(in srgb, var(--api-member-accent, var(--color-primary)) 20%, transparent);
  
  /* Spacing */
  --api-section-gap: var(--space-8);
  --api-member-gap: var(--space-3);
  --api-nested-indent: var(--space-4);
  
  font-size: var(--text-sm);
  line-height: 1.6;
}

[data-theme="dark"] .api-explorer {
  --api-window-bg: var(--color-bg-secondary);
  --api-window-header-bg: linear-gradient(180deg, 
    var(--color-bg-elevated) 0%, 
    var(--color-bg-secondary) 100%);
  --api-shadow-diffused: 
    0 4px 24px -4px rgba(0, 0, 0, 0.25),
    0 8px 32px -8px rgba(0, 0, 0, 0.15);
  --api-shadow-elevated:
    0 8px 32px -8px rgba(0, 0, 0, 0.35),
    0 16px 48px -16px rgba(0, 0, 0, 0.25);
}

/* ============================================
   MODULE HEADER - Information-Dense Title Bar
   ============================================ */

.api-module-header {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--space-4);
  padding: var(--space-5) var(--space-6);
  margin-bottom: var(--space-8);
  
  /* Window chrome styling */
  background: var(--api-window-header-bg);
  border: 1px solid var(--api-window-border);
  border-radius: var(--api-window-radius);
  
  /* Neumorphic depth with diffused glow */
  box-shadow: 
    var(--api-shadow-diffused),
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);
  
  /* Top gradient accent */
  position: relative;
}

.api-module-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, 
    var(--color-primary) 0%,
    var(--color-secondary) 50%,
    var(--color-accent, var(--color-primary)) 100%);
  border-radius: var(--api-window-radius) var(--api-window-radius) 0 0;
  opacity: 0.9;
}

[data-theme="dark"] .api-module-header {
  box-shadow: 
    var(--api-shadow-diffused),
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    inset 0 -1px 0 rgba(0, 0, 0, 0.2);
}

.api-module-header__top-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  grid-column: 1 / -1;
}

.api-module-header__badges {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.api-module-header__short-name {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  color: var(--color-text-muted);
  background: var(--color-bg-tertiary);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-light);
}

.api-module-header__title {
  margin: 0;
  font-family: var(--font-mono);
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  line-height: var(--leading-tight);
  color: var(--color-text-primary);
  word-break: break-word;
  overflow-wrap: anywhere;
}

.api-module-header__title code {
  background: none;
  padding: 0;
  color: inherit;
  font-size: inherit;
}

.api-module-header__description {
  margin: 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  line-height: var(--leading-relaxed);
  max-width: 65ch;
}

.api-module-header__bottom-row {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  flex-wrap: wrap;
  grid-column: 1 / -1;
  padding-top: var(--space-4);
  border-top: 1px solid var(--color-border-light);
  margin-top: var(--space-2);
}

.api-module-header__stats {
  display: flex;
  gap: var(--space-5);
  margin-left: auto;
}

.api-module-header__stat {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.api-module-header__stat-value {
  font-size: var(--text-xl);
  font-weight: var(--weight-bold);
  color: var(--color-primary);
  font-variant-numeric: tabular-nums;
}

.api-module-header__stat-label {
  font-size: var(--text-xs);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  color: var(--color-text-muted);
  font-weight: var(--weight-medium);
}

/* ============================================
   API STATS BAR - Horizontal Pill Display
   ============================================ */

.api-stats {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-3) var(--space-4);
  margin-bottom: var(--space-6);
  
  background: linear-gradient(180deg,
    var(--color-surface) 0%,
    var(--color-bg-secondary) 100%);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-2xl);
  
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    0 2px 8px -2px rgba(0, 0, 0, 0.06);
}

.api-stat {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1) var(--space-3);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-xl);
}

.api-stat__count {
  font-size: var(--text-lg);
  font-weight: var(--weight-bold);
  color: var(--color-primary);
  font-variant-numeric: tabular-nums;
}

.api-stat__label {
  font-size: var(--text-xs);
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  font-weight: var(--weight-medium);
}

/* ============================================
   SECTION HEADERS
   ============================================ */

.api-section {
  margin-bottom: var(--api-section-gap);
}

.api-section__title {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-size: var(--text-lg);
  font-family: var(--font-heading-section, var(--font-heading));
  font-weight: var(--weight-semibold);
  color: var(--color-text-primary);
  margin: 0 0 var(--space-4) 0;
  padding-bottom: var(--space-3);
  border-bottom: 2px solid var(--color-border-light);
}

.api-section__title::before {
  content: '';
  width: 4px;
  height: 1.1em;
  background: linear-gradient(180deg,
    var(--api-section-accent, var(--color-primary)) 0%,
    color-mix(in srgb, var(--api-section-accent, var(--color-primary)) 50%, var(--color-secondary)) 100%);
  border-radius: var(--radius-full);
  flex-shrink: 0;
}

.api-section--classes { --api-section-accent: var(--color-info); }
.api-section--functions { --api-section-accent: var(--color-success); }
.api-section--methods { --api-section-accent: var(--color-secondary); }

/* ============================================
   API MEMBER - Terminal Window Cards
   
   The core component: collapsible windows with
   title bar chrome and content area
   ============================================ */

.api-cards {
  display: flex;
  flex-direction: column;
  gap: var(--api-member-gap);
}

.api-member {
  --api-member-accent: var(--color-primary);
  
  position: relative;
  border-radius: var(--api-window-radius);
  overflow: hidden;
  
  /* Window styling */
  background: var(--api-window-bg);
  border: 1px solid var(--api-window-border);
  
  /* Neumorphic shadow with diffused light */
  box-shadow: 
    var(--api-shadow-diffused),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
  
  transition: 
    box-shadow 0.2s ease,
    border-color 0.2s ease,
    transform 0.2s ease;
}

/* Type-specific accent colors */
.api-member--class { --api-member-accent: var(--color-info); }
.api-member--dataclass { --api-member-accent: #8b5cf6; /* Purple */ }
.api-member--function { --api-member-accent: var(--color-success); }
.api-member--method { --api-member-accent: var(--color-text-secondary); }
.api-member--property { --api-member-accent: #10b981; /* Emerald */ }
.api-member--async { --api-member-accent: var(--color-warning); }
.api-member--abstract { --api-member-accent: var(--color-secondary); }
.api-member--private { opacity: 0.85; }

/* Hover state - elevate and glow */
.api-member:hover {
  border-color: color-mix(in srgb, var(--api-member-accent) 40%, var(--color-border));
  box-shadow: 
    var(--api-shadow-elevated),
    var(--api-glow-accent),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

/* Open state - prominent left accent + expanded glow */
.api-member[open] {
  box-shadow: 
    var(--api-shadow-elevated),
    var(--api-glow-accent),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.api-member[open]::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 3px;
  height: 100%;
  background: linear-gradient(180deg,
    var(--api-member-accent) 0%,
    color-mix(in srgb, var(--api-member-accent) 60%, transparent) 100%);
}

[data-theme="dark"] .api-member {
  background: var(--color-bg-secondary);
  box-shadow: 
    var(--api-shadow-diffused),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

[data-theme="dark"] .api-member:hover,
[data-theme="dark"] .api-member[open] {
  box-shadow: 
    var(--api-shadow-elevated),
    0 0 30px -8px color-mix(in srgb, var(--api-member-accent) 30%, transparent);
}

/* Fallback for browsers without color-mix */
@supports not (color: color-mix(in srgb, black, white)) {
  .api-member:hover,
  .api-member[open] {
    border-color: var(--color-primary-light);
    box-shadow: var(--api-shadow-elevated);
  }
}

/* ============================================
   API MEMBER SUMMARY - Window Title Bar
   
   Horizontal layout with:
   - Window dots (decorative)
   - Type icon
   - Name + badges
   - Meta info (params, return type)
   - Toggle chevron
   ============================================ */

.api-member__summary {
  display: grid;
  grid-template-columns: auto 1fr auto auto;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  
  /* Title bar gradient */
  background: var(--api-window-header-bg);
  border-bottom: 1px solid var(--api-window-border);
  
  cursor: pointer;
  user-select: none;
  list-style: none;
  
  transition: background-color 0.15s ease;
}

.api-member__summary::-webkit-details-marker { display: none; }
.api-member__summary::marker { display: none; }

.api-member__summary:hover {
  background: color-mix(in srgb, var(--api-member-accent) 5%, var(--color-surface));
}

[data-theme="dark"] .api-member__summary:hover {
  background: color-mix(in srgb, var(--api-member-accent) 8%, var(--color-bg-secondary));
}

@supports not (color: color-mix(in srgb, black, white)) {
  .api-member__summary:hover {
    background: var(--color-bg-secondary);
  }
}

/* Window control dots (decorative) */
.api-member__icon {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  width: 52px;
}

.api-member__icon::before {
  content: '';
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--api-member-accent) 70%, white) 0%,
    var(--api-member-accent) 100%);
  box-shadow: 
    inset 0 1px 2px rgba(255, 255, 255, 0.4),
    0 1px 2px rgba(0, 0, 0, 0.1);
}

.api-member[open] .api-member__icon::before {
  box-shadow: 
    inset 0 1px 2px rgba(255, 255, 255, 0.4),
    0 0 8px color-mix(in srgb, var(--api-member-accent) 50%, transparent);
}

@supports not (color: color-mix(in srgb, black, white)) {
  .api-member__icon::before {
    background: var(--color-primary);
  }
}

/* Name & description */
.api-member__info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.api-member__name-row {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.api-member__name {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--color-text-primary);
  background: none;
  padding: 0;
}

.api-member__desc-preview {
  font-size: var(--text-xs);
  color: var(--color-text-muted);
  line-height: var(--leading-tight);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 400px;
}

.api-member[open] .api-member__desc-preview {
  display: none;
}

/* Meta info: params + return - horizontal pills */
.api-member__meta {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-shrink: 0;
}

.api-member__params,
.api-member__count {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  color: var(--color-text-muted);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-light);
}

.api-member__return {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.api-member__return code {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  color: var(--color-code-type);
  background: var(--color-code-type-bg);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

/* Toggle chevron */
.api-member__toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  color: var(--color-text-muted);
  transition: transform 0.2s ease, color 0.2s ease;
}

.api-member[open] .api-member__toggle {
  transform: rotate(90deg);
  color: var(--api-member-accent);
}

/* ============================================
   API MEMBER CONTENT - Window Body
   
   Expanded content with:
   - Description
   - Signature code block
   - Attributes/Parameters tables
   - Returns/Raises
   - Nested methods
   ============================================ */

.api-member__content {
  padding: var(--space-4) var(--space-5);
  background: var(--color-bg-primary);
  border-top: 1px solid var(--color-border-light);
}

[data-theme="dark"] .api-member__content {
  background: var(--color-bg-tertiary);
}

.api-member__description {
  margin: 0 0 var(--space-4) 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  line-height: var(--leading-relaxed);
}

/* Signature code block - terminal style */
.api-signature {
  margin: var(--space-3) 0 var(--space-4) 0;
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  border-radius: var(--radius-lg);
  overflow: hidden;
  
  /* Terminal-like appearance */
  background: linear-gradient(180deg,
    #1e1e2e 0%,
    #181825 100%);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    0 4px 12px -4px rgba(0, 0, 0, 0.3);
}

.api-signature pre {
  margin: 0;
  padding: var(--space-4);
  overflow-x: auto;
}

.api-signature code {
  color: #cdd6f4;
  background: none;
  padding: 0;
}

/* ============================================
   SUBSECTION LABELS
   ============================================ */

.api-label {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin: var(--space-4) 0 var(--space-2) 0;
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  color: var(--color-text-muted);
}

.api-label__count {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  color: var(--color-text-muted);
  background: var(--color-bg-secondary);
  padding: 2px 8px;
  border-radius: var(--radius-full);
}

/* ============================================
   ATTRIBUTES TABLE - Clean Grid Layout
   ============================================ */

.api-attributes {
  margin: var(--space-4) 0;
}

.api-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--text-sm);
  border-radius: var(--radius-lg);
  overflow: hidden;
  border: 1px solid var(--color-border-light);
}

.api-table thead {
  background: linear-gradient(180deg,
    var(--color-bg-secondary) 0%,
    var(--color-bg-tertiary) 100%);
}

.api-table th {
  padding: var(--space-2) var(--space-3);
  text-align: left;
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  color: var(--color-text-muted);
  border-bottom: 1px solid var(--color-border-light);
}

.api-table td {
  padding: var(--space-2) var(--space-3);
  vertical-align: top;
  border-bottom: 1px solid var(--color-border-light);
}

.api-table tbody tr:last-child td {
  border-bottom: none;
}

.api-table tbody tr {
  transition: background-color 0.15s ease;
}

.api-table tbody tr:hover {
  background: var(--color-bg-secondary);
}

.api-table__name code {
  font-family: var(--font-mono);
  font-weight: var(--weight-semibold);
  color: var(--color-primary);
  background: none;
  padding: 0;
}

.api-table__type code {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  color: var(--color-code-type);
  background: var(--color-code-type-bg);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.api-table__desc {
  color: var(--color-text-secondary);
  line-height: 1.5;
}

/* Compact table variant for nested contexts */
.api-table--compact th,
.api-table--compact td {
  padding: var(--space-2);
}

/* Mini table - no headers */
.api-table--mini thead {
  display: none;
}

.api-table--mini {
  font-size: var(--text-xs);
}

/* ============================================
   RETURNS & RAISES - Styled Callouts
   ============================================ */

.api-returns,
.api-raises {
  margin: var(--space-3) 0;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-lg);
  font-size: var(--text-sm);
}

.api-returns {
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--color-info) 8%, transparent) 0%,
    color-mix(in srgb, var(--color-info) 3%, transparent) 100%);
  border-left: 3px solid var(--color-info);
}

.api-raises {
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--color-danger) 8%, transparent) 0%,
    color-mix(in srgb, var(--color-danger) 3%, transparent) 100%);
  border-left: 3px solid var(--color-danger);
}

@supports not (color: color-mix(in srgb, black, white)) {
  .api-returns { background: var(--color-info-bg); }
  .api-raises { background: var(--color-danger-bg); }
}

.api-returns__content,
.api-raises__content {
  margin: 0;
  line-height: 1.6;
}

.api-raises__list {
  list-style: none;
  margin: var(--space-2) 0 0 0;
  padding: 0;
}

.api-raises__list li {
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--color-border-light);
}

.api-raises__list li:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

/* ============================================
   NESTED METHODS - Indented Child Cards
   ============================================ */

.api-methods {
  margin-top: var(--space-4);
  padding-top: var(--space-3);
  border-top: 1px dashed var(--color-border-light);
}

.api-methods .api-cards {
  margin-left: var(--api-nested-indent);
  padding-left: var(--space-3);
  border-left: 2px solid color-mix(in srgb, var(--color-border) 50%, transparent);
}

@supports not (color: color-mix(in srgb, black, white)) {
  .api-methods .api-cards {
    border-left-color: var(--color-border-light);
  }
}

.api-methods .api-member {
  --api-window-radius: 8px;
}

.api-methods .api-member__summary {
  padding: var(--space-2) var(--space-3);
}

.api-methods .api-member__icon {
  width: 40px;
}

.api-methods .api-member__icon::before {
  width: 10px;
  height: 10px;
}

/* ============================================
   CLASS BASES - Inheritance Display
   ============================================ */

.api-class__bases {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
  margin-bottom: var(--space-3);
  padding: var(--space-2) var(--space-3);
  background: linear-gradient(180deg,
    var(--color-bg-secondary) 0%,
    var(--color-bg-tertiary) 100%);
  border-radius: var(--radius-lg);
  font-size: var(--text-sm);
  border: 1px solid var(--color-border-light);
}

.api-class__bases .api-label {
  margin: 0;
  padding: 0;
  font-size: var(--text-xs);
}

.api-class__base {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--color-code-type);
  background: var(--color-code-type-bg);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
}

/* ============================================
   BADGES - Compact Type Indicators
   ============================================ */

.api-badge--compact,
.api-badge--inline {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: var(--radius-md);
  font-size: 10px;
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  line-height: 1.4;
  
  /* Neumorphic badge style */
  background: linear-gradient(180deg,
    var(--color-surface) 0%,
    var(--color-bg-secondary) 100%);
  border: 1px solid var(--color-border-light);
  box-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.04),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.api-badge--module {
  color: var(--color-primary);
  border-color: color-mix(in srgb, var(--color-primary) 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-primary) 10%, var(--color-surface)) 0%,
    color-mix(in srgb, var(--color-primary) 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--class,
.api-badge--inline.api-badge--class {
  color: var(--color-info);
  border-color: color-mix(in srgb, var(--color-info) 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-info) 10%, var(--color-surface)) 0%,
    color-mix(in srgb, var(--color-info) 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--dataclass,
.api-badge--inline.api-badge--dataclass {
  color: #8b5cf6;
  border-color: color-mix(in srgb, #8b5cf6 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, #8b5cf6 10%, var(--color-surface)) 0%,
    color-mix(in srgb, #8b5cf6 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--function,
.api-badge--inline.api-badge--function {
  color: var(--color-success);
  border-color: color-mix(in srgb, var(--color-success) 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-success) 10%, var(--color-surface)) 0%,
    color-mix(in srgb, var(--color-success) 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--async,
.api-badge--inline.api-badge--async {
  color: var(--color-warning);
  border-color: color-mix(in srgb, var(--color-warning) 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-warning) 10%, var(--color-surface)) 0%,
    color-mix(in srgb, var(--color-warning) 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--property,
.api-badge--inline.api-badge--property {
  color: #10b981;
  border-color: color-mix(in srgb, #10b981 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, #10b981 10%, var(--color-surface)) 0%,
    color-mix(in srgb, #10b981 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--classmethod,
.api-badge--staticmethod,
.api-badge--inline.api-badge--classmethod,
.api-badge--inline.api-badge--staticmethod {
  color: var(--color-info);
  border-color: color-mix(in srgb, var(--color-info) 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-info) 10%, var(--color-surface)) 0%,
    color-mix(in srgb, var(--color-info) 5%, var(--color-bg-secondary)) 100%);
}

.api-badge--abstract,
.api-badge--inline.api-badge--abstract {
  color: var(--color-text-muted);
  background: linear-gradient(180deg,
    var(--color-bg-secondary) 0%,
    var(--color-bg-tertiary) 100%);
}

.api-badge--deprecated,
.api-badge--inline.api-badge--deprecated {
  color: var(--color-danger);
  border-color: color-mix(in srgb, var(--color-danger) 30%, transparent);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--color-danger) 10%, var(--color-surface)) 0%,
    color-mix(in srgb, var(--color-danger) 5%, var(--color-bg-secondary)) 100%);
}

/* Fallback for browsers without color-mix */
@supports not (color: color-mix(in srgb, black, white)) {
  .api-badge--compact,
  .api-badge--inline {
    background: var(--color-bg-secondary);
    border-color: var(--color-border);
  }
  
  .api-badge--module { background: var(--color-primary-light); }
  .api-badge--class { background: var(--color-info-bg); }
  .api-badge--function { background: var(--color-success-bg); }
  .api-badge--async { background: var(--color-warning-bg); }
  .api-badge--deprecated { background: var(--color-danger-bg); }
}

/* ============================================
   SOURCE LINK - Compact Button
   ============================================ */

.api-source-link,
.api-module-header__source a {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  color: var(--color-text-muted);
  text-decoration: none;
  
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-lg);
  
  transition: all 0.15s ease;
}

.api-source-link:hover,
.api-module-header__source a:hover {
  color: var(--color-primary);
  border-color: color-mix(in srgb, var(--color-primary) 40%, var(--color-border));
  background: color-mix(in srgb, var(--color-primary) 5%, var(--color-surface));
  box-shadow: 0 2px 8px -2px color-mix(in srgb, var(--color-primary) 20%, transparent);
}

@supports not (color: color-mix(in srgb, black, white)) {
  .api-source-link:hover,
  .api-module-header__source a:hover {
    border-color: var(--color-primary-light);
    background: var(--color-surface);
  }
}

/* ============================================
   API CARD (Legacy/Alternate Style)
   ============================================ */

.api-card {
  --api-card-accent: var(--color-primary);
  position: relative;
  background: var(--api-window-bg);
  border: 1px solid var(--api-window-border);
  border-radius: var(--api-window-radius);
  overflow: hidden;
  margin-bottom: var(--space-3);
  
  box-shadow: var(--api-shadow-diffused);
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.api-card--class { --api-card-accent: var(--color-info); }
.api-card--function { --api-card-accent: var(--color-success); }

.api-card[open] {
  box-shadow: 
    var(--api-shadow-elevated),
    var(--api-glow-accent);
}

.api-card[open]::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 3px;
  height: 100%;
  background: linear-gradient(180deg,
    var(--api-card-accent) 0%,
    color-mix(in srgb, var(--api-card-accent) 50%, transparent) 100%);
}

.api-card__header {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  background: var(--api-window-header-bg);
  border-bottom: 1px solid var(--api-window-border);
  cursor: pointer;
  user-select: none;
}

.api-card__header:hover {
  background: color-mix(in srgb, var(--api-card-accent) 5%, var(--color-surface));
}

.api-card__icon {
  font-size: 1.1em;
  opacity: 0.7;
  color: var(--api-card-accent);
}

.api-card__name {
  font-family: var(--font-mono);
  font-weight: var(--weight-semibold);
  font-size: var(--text-base);
  color: var(--color-text-primary);
  flex: 1;
}

.api-card__name code {
  background: none;
  padding: 0;
}

.api-card__badges {
  display: flex;
  gap: var(--space-2);
}

.api-card__toggle {
  color: var(--color-text-muted);
  font-size: 0.8em;
  transition: transform 0.2s ease;
}

.api-card[open] .api-card__toggle {
  transform: rotate(90deg);
}

.api-card__content {
  padding: var(--space-4);
}

.api-card__description {
  margin: 0 0 var(--space-3);
  color: var(--color-text-secondary);
  font-size: var(--text-sm);
}

/* When using <details> */
details.api-card > summary { list-style: none; }
details.api-card > summary::-webkit-details-marker { display: none; }
details.api-card > summary::marker { display: none; }

/* ============================================
   ANIMATION & TRANSITIONS
   ============================================ */

/* Stagger animation for cards */
@keyframes api-card-reveal {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.api-cards > .api-member,
.api-cards > .api-card {
  animation: api-card-reveal 0.3s ease backwards;
}

.api-cards > *:nth-child(1) { animation-delay: 0ms; }
.api-cards > *:nth-child(2) { animation-delay: 40ms; }
.api-cards > *:nth-child(3) { animation-delay: 80ms; }
.api-cards > *:nth-child(4) { animation-delay: 120ms; }
.api-cards > *:nth-child(5) { animation-delay: 160ms; }
.api-cards > *:nth-child(n+6) { animation-delay: 200ms; }

/* ============================================
   RESPONSIVE DESIGN
   ============================================ */

@media (max-width: 768px) {
  .api-module-header {
    padding: var(--space-4);
    grid-template-columns: 1fr;
  }
  
  .api-module-header__stats {
    margin-left: 0;
    width: 100%;
    justify-content: flex-start;
  }
  
  .api-member__summary {
    grid-template-columns: auto 1fr auto;
    gap: var(--space-2);
  }
  
  .api-member__meta {
    display: none;
  }
  
  .api-member__desc-preview {
    max-width: 200px;
  }
  
  .api-stats {
    flex-wrap: wrap;
  }
  
  .api-methods .api-cards {
    margin-left: var(--space-2);
    padding-left: var(--space-2);
  }
}

@media (max-width: 480px) {
  .api-member__summary {
    padding: var(--space-2) var(--space-3);
  }
  
  .api-member__icon {
    display: none;
  }
  
  .api-member__desc-preview {
    display: none;
  }
  
  .api-table {
    display: block;
  }
  
  .api-table thead {
    display: none;
  }
  
  .api-table tbody,
  .api-table tr,
  .api-table td {
    display: block;
  }
  
  .api-table tr {
    padding: var(--space-3);
    border-bottom: 1px solid var(--color-border-light);
  }
  
  .api-table td {
    padding: var(--space-1) 0;
    border: none;
  }
  
  .api-table td::before {
    content: attr(data-label);
    display: block;
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    color: var(--color-text-muted);
    text-transform: uppercase;
    margin-bottom: 2px;
  }
}

/* ============================================
   REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .api-member,
  .api-card,
  .api-member__toggle,
  .api-cards > * {
    animation: none !important;
    transition: none !important;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  .api-member,
  .api-card {
    break-inside: avoid;
    box-shadow: none !important;
    border: 1px solid #000;
  }
  
  .api-member[open] .api-member__content,
  .api-card .api-card__content {
    display: block !important;
  }
  
  .api-member__toggle,
  .api-card__toggle {
    display: none;
  }
  
  .api-signature {
    background: #f5f5f5 !important;
    color: #000 !important;
  }
}

/* ============================================
   INDEX PAGE - Package/Module Grid
   ============================================ */

.api-explorer--index {
  max-width: 100%;
}

.api-grid {
  display: grid;
  gap: var(--space-4);
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}

.api-grid--packages {
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
}

/* Package Card - Large Feature Card */
.api-package-card {
  display: flex;
  flex-direction: column;
  background: var(--api-window-bg);
  border: 1px solid var(--api-window-border);
  border-radius: var(--api-window-radius);
  overflow: hidden;
  text-decoration: none;
  color: inherit;
  
  box-shadow: var(--api-shadow-diffused);
  transition: 
    box-shadow 0.2s ease,
    transform 0.2s ease,
    border-color 0.2s ease;
}

.api-package-card:hover {
  transform: translateY(-2px);
  box-shadow: 
    var(--api-shadow-elevated),
    var(--api-glow-primary);
  border-color: color-mix(in srgb, var(--color-primary) 40%, var(--color-border));
}

.api-package-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, 
    var(--color-primary) 0%,
    var(--color-secondary) 100%);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.api-package-card:hover::before {
  opacity: 1;
}

.api-package-card__header {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  background: var(--api-window-header-bg);
  border-bottom: 1px solid var(--api-window-border);
}

.api-package-card__icon {
  font-size: 1.5rem;
  line-height: 1;
  opacity: 0.8;
}

.api-package-card__name {
  font-size: var(--text-lg);
  font-weight: var(--weight-semibold);
  color: var(--color-text-primary);
}

.api-package-card__body {
  flex: 1;
  padding: var(--space-4) var(--space-5);
}

.api-package-card__description {
  margin: 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  line-height: var(--leading-relaxed);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.api-package-card__footer {
  padding: var(--space-3) var(--space-5);
  background: var(--color-bg-tertiary);
  border-top: 1px solid var(--api-window-border);
}

.api-package-card__meta {
  font-size: var(--text-xs);
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
}

/* Module Card - Compact Card */
.api-module-card {
  display: flex;
  flex-direction: column;
  background: var(--api-window-bg);
  border: 1px solid var(--api-window-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  text-decoration: none;
  color: inherit;
  
  box-shadow: 
    0 2px 8px -2px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
  
  transition: 
    box-shadow 0.15s ease,
    transform 0.15s ease,
    border-color 0.15s ease;
}

.api-module-card:hover {
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--color-secondary) 40%, var(--color-border));
  box-shadow: 
    0 4px 16px -4px rgba(0, 0, 0, 0.1),
    0 0 16px -4px color-mix(in srgb, var(--color-secondary) 15%, transparent);
}

.api-module-card__header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  background: var(--api-window-header-bg);
  border-bottom: 1px solid var(--api-window-border);
}

.api-module-card__icon {
  font-size: 1rem;
  line-height: 1;
  opacity: 0.7;
}

.api-module-card__name {
  flex: 1;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  font-family: var(--font-mono);
  color: var(--color-text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.api-module-card__body {
  flex: 1;
  padding: var(--space-3) var(--space-4);
}

.api-module-card__description {
  margin: 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  line-height: var(--leading-normal);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.api-module-card__badges {
  display: flex;
  gap: var(--space-1);
  flex-wrap: wrap;
}

/* Empty State */
.api-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-12);
  text-align: center;
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: var(--api-window-radius);
}

.api-empty-state__icon {
  font-size: 3rem;
  margin-bottom: var(--space-4);
  opacity: 0.4;
}

.api-empty-state__text {
  margin: 0;
  font-size: var(--text-lg);
  color: var(--color-text-muted);
}

/* ============================================
   API PARAMETERS SECTION
   ============================================ */

.api-parameters {
  margin: var(--space-4) 0;
}

/* ============================================
   SEE ALSO & METADATA
   ============================================ */

.api-see-also {
  margin: var(--space-3) 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  border-top: 1px solid var(--color-border-light);
  padding-top: var(--space-3);
}

.api-see-also strong {
  color: var(--color-text-muted);
  font-size: var(--text-xs);
  text-transform: uppercase;
  margin-right: var(--space-2);
}

.api-metadata {
  margin: var(--space-2) 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
}

.api-metadata strong {
  color: var(--color-text-muted);
  font-weight: var(--weight-medium);
  text-transform: uppercase;
  font-size: var(--text-xs);
  letter-spacing: 0.05em;
  margin-right: var(--space-2);
}

/* ============================================
   WARNING & INFO CALLOUTS
   ============================================ */

.api-warning,
.api-info {
  margin: var(--space-3) 0;
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  font-size: var(--text-sm);
  display: flex;
  gap: var(--space-2);
  align-items: flex-start;
}

.api-warning {
  background: color-mix(in srgb, var(--color-danger) 8%, transparent);
  color: var(--color-danger);
  border: 1px solid color-mix(in srgb, var(--color-danger) 20%, transparent);
}

.api-info {
  background: color-mix(in srgb, var(--color-info) 8%, transparent);
  color: var(--color-info);
  border: 1px solid color-mix(in srgb, var(--color-info) 20%, transparent);
}

@supports not (color: color-mix(in srgb, black, white)) {
  .api-warning { background: var(--color-danger-bg); border-color: var(--color-danger-border); }
  .api-info { background: var(--color-info-bg); border-color: var(--color-info-border); }
}

.api-warning strong,
.api-info strong {
  font-weight: var(--weight-semibold);
}

/* ============================================
   SUBSECTION TITLE (H4 in content)
   ============================================ */

.api-subsection-title {
  margin: var(--space-4) 0 var(--space-2) 0;
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wider);
  color: var(--color-text-muted);
}

/* ============================================
   EXAMPLES SECTION
   ============================================ */

.api-examples {
  margin: var(--space-4) 0;
}

.api-example {
  margin: var(--space-2) 0;
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.api-example pre {
  margin: 0;
  padding: var(--space-4);
  background: linear-gradient(180deg, #1e1e2e 0%, #181825 100%);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.api-example code {
  color: #cdd6f4;
  background: none;
}
